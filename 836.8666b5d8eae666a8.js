"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[836],{2836:(At,I,a)=>{a.r(I),a.d(I,{PaymentModule:()=>Zt});var C=a(4521),Y=a(5861),l=a(3075),d=a(7579),u=a(2722),g=a(8966),h=a(1937),t=a(5e3),x=a(7495),S=a(1135),P=a(4004),N=a(262),J=a(9646),F=a(2340),w=a(520);const D=F.N.base_url;let y=(()=>{class n{constructor(e){this._http=e,this.userId=new d.x,this.onlistenSubject=new d.x,this._payments=new S.X(null)}get userId$(){return this.userId.asObservable()}get payments$(){return this._payments.asObservable()}getPayments(e){return this._http.post(`${D}/payment/payments`,e,this.getHeaders).pipe((0,P.U)(o=>o.statusCode&&200==o.statusCode?(this._payments.next(o.data),{payments:o.data,total:o.count,page:o.page,pages:o.pages}):null),(0,N.K)(o=>(0,J.of)(null)))}createPayment(e){return this._http.post(`${D}/payment/create`,e,this.getHeaders).pipe((0,P.U)(o=>o.statusCode?o.statusCode:500),(0,N.K)(o=>(0,J.of)(o.status)))}getMonths(){const o=(new Date).getMonth()+1;return[{description:"Enero",value:1},{description:"Febrero",value:2},{description:"Marzo",value:3},{description:"Abril",value:4},{description:"Mayo",value:5},{description:"Junio",value:6},{description:"Julio",value:7},{description:"Agosto",value:8},{description:"Septiembre",value:9},{description:"Octubre",value:10},{description:"Noviembre",value:11},{description:"Diciembre",value:12}].slice(0,o)}getAmounts(){return[{description:"Q 800.00",value:800}]}get getToken(){return localStorage.getItem("x-token")||""}get getHeaders(){return{headers:{"x-token":this.getToken}}}listenDialog(){this.onlistenSubject.next()}get dialogStatus(){return this.onlistenSubject.asObservable()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var c=a(9808),f=a(7322),Q=a(7531),b=a(4102),Z=a(508),_=a(5245),v=a(7423);function O(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function M(n,i){if(1&n&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.description)}}function q(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function k(n,i){if(1&n&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.description)}}function E(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function L(n,i){if(1&n&&t._UZ(0,"img",17),2&n){const e=t.oxw(2);t.Q6J("src",e.base64Image,t.LSH)}}function R(n,i){1&n&&(t.TgZ(0,"div",18),t._UZ(1,"mat-icon",19),t.TgZ(2,"div",20),t._uU(3,"PDF"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("svgIcon","iconsmind:file"))}function z(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"La im\xe1gen debe ser en extensi\xf3n .jpg, .png o .jpeg"),t.qZA())}function j(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"La im\xe1gen debe pesar menos o igual a 7mb"),t.qZA())}function H(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"h2",1),t._uU(2,"Realizar pago"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().registerPayment()}),t.TgZ(4,"mat-form-field"),t._UZ(5,"input",3),t.YNc(6,O,2,0,"mat-error",0),t.qZA(),t.TgZ(7,"mat-form-field")(8,"mat-select",4),t.YNc(9,M,2,2,"mat-option",5),t.qZA(),t.YNc(10,q,2,0,"mat-error",0),t.qZA(),t.TgZ(11,"mat-form-field")(12,"mat-select",6),t.YNc(13,k,2,2,"mat-option",5),t.qZA(),t.YNc(14,E,2,0,"mat-error",0),t.qZA(),t.TgZ(15,"div",7)(16,"div",8),t.YNc(17,L,1,1,"img",9),t.YNc(18,R,4,1,"div",10),t.qZA()(),t.TgZ(19,"div",11)(20,"input",12),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onFileSelected(r)}),t.qZA(),t.YNc(21,z,2,0,"mat-error",0),t.YNc(22,j,2,0,"mat-error",0),t.qZA(),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClose()}),t._uU(25," Cancelar "),t.qZA(),t.TgZ(26,"button",15),t._uU(27," Crear "),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("ngIf",e.form.get("description").invalid&&e.form.get("description").touched),t.xp6(3),t.Q6J("ngForOf",e.amounts),t.xp6(1),t.Q6J("ngIf",e.form.get("amount").invalid&&e.form.get("amount").touched),t.xp6(3),t.Q6J("ngForOf",e.months),t.xp6(1),t.Q6J("ngIf",e.form.get("month").invalid&&e.form.get("month").touched),t.xp6(3),t.Q6J("ngIf",e.base64Image),t.xp6(1),t.Q6J("ngIf",!e.base64Image),t.xp6(3),t.Q6J("ngIf",e.invalidExtention),t.xp6(1),t.Q6J("ngIf",e.invalidSize),t.xp6(4),t.Q6J("color","primary")("disabled",e.form.invalid||e.form.pristine&&e.noImageChanged||e.invalidExtention||e.invalidSize)}}function $(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function B(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function G(n,i){if(1&n&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.description)}}function K(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function V(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es requerido. "),t.qZA())}function W(n,i){if(1&n&&t._UZ(0,"img",17),2&n){const e=t.oxw(2);t.Q6J("src",e.base64Image,t.LSH)}}function X(n,i){1&n&&(t.TgZ(0,"div",18),t._UZ(1,"mat-icon",19),t.TgZ(2,"div",20),t._uU(3,"PDF"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("svgIcon","iconsmind:file"))}function tt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"h2",1),t._uU(2,"Ver detalles del pago"),t.qZA(),t.TgZ(3,"form",21)(4,"mat-form-field"),t._UZ(5,"input",3),t.YNc(6,$,2,0,"mat-error",0),t.qZA(),t.TgZ(7,"mat-form-field")(8,"input",22),t.NdJ("keypress",function(r){return t.CHM(e),t.oxw().onlyPositiveNumbers(r)}),t.qZA(),t.YNc(9,B,2,0,"mat-error",0),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-select",6),t.YNc(12,G,2,2,"mat-option",5),t.qZA(),t.YNc(13,K,2,0,"mat-error",0),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",23),t.YNc(16,V,2,0,"mat-error",0),t.qZA(),t.TgZ(17,"div",7)(18,"div",8),t.YNc(19,W,1,1,"img",9),t.YNc(20,X,4,1,"div",10),t.qZA()(),t.TgZ(21,"div",13)(22,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClose()}),t._uU(23," Cerrar "),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("ngIf",e.form.get("description").invalid&&e.form.get("description").touched),t.xp6(3),t.Q6J("ngIf",e.form.get("amount").invalid&&e.form.get("amount").touched),t.xp6(3),t.Q6J("ngForOf",e.months),t.xp6(1),t.Q6J("ngIf",e.form.get("month").invalid&&e.form.get("month").touched),t.xp6(3),t.Q6J("ngIf",e.form.get("payedAt").invalid&&e.form.get("payedAt").touched),t.xp6(3),t.Q6J("ngIf",e.base64Image),t.xp6(1),t.Q6J("ngIf",!e.base64Image),t.xp6(2),t.Q6J("color","primary")}}let U=(()=>{class n{constructor(e,o,r,s,m,p,Tt){this.data=e,this._fb=o,this._session=r,this._service=s,this._snackbar=m,this._changeDetectorRef=p,this._dialogRef=Tt,this.isNew=!0,this.showImage=!1,this.invalidExtention=!1,this.invalidSize=!1,this.months=[],this.amounts=[],this._unsubscribeAll=new d.x}ngOnInit(){var e;this._onGetSession(),this.getMoths(),this.getAmounts(),this.initForm(),(null===(e=this.data)||void 0===e?void 0:e.payment)&&this.setForm(this.data.payment)}initForm(){var e,o;this.isNew=!0,this.form=this._fb.group({userId:[null===(e=this.user)||void 0===e?void 0:e.id,[l.kI.required]],amount:["",[l.kI.required]],month:["",[l.kI.required]],description:["",[l.kI.required]],payedAt:[""],email:[null===(o=this.user)||void 0===o?void 0:o.email]})}_onGetSession(){this._session.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e})}setForm(e){this.isNew=!1,this.noImageChanged=!0,this.form.patchValue({id:e.id,amount:e.amount,userId:null==e?void 0:e.userId,month:parseInt(e.month),description:e.description,payedAt:this.convertDate(e.payedAt)}),(null==e?void 0:e.photo)&&(this.base64Image=null==e?void 0:e.photo)}registerPayment(){if(this.form.invalid)return Object.values(this.form.controls).forEach(e=>e.markAsTouched());this._service.createPayment(this.form.value).subscribe(e=>{if(403==e){const o=this.months.find(r=>{var s;return r.value==(null===(s=this.form.controls.month)||void 0===s?void 0:s.value)}).description;return this._snackbar.open(`Ya existe un pago registrado para el mes de ${o}.`)}return 200==e?(this.onClose(!0),this._snackbar.open("Se ha registrado el pago exit\xf3samente.")):this._snackbar.open("Ha ocurrido un error al registrar el pago.")})}onFileSelected(e){if(e.target.files&&e.target.files[0]){const r=["image/png","image/jpeg","image/jpg","application/pdf"];if(e.target.files[0].size>2e6)return void(this.invalidSize=!0);if(!r.includes(e.target.files[0].type))return void(this.invalidExtention=!0);const s=new FileReader;s.onload=m=>{this.invalidSize=!1,this.invalidExtention=!1,this.base64Image=m.target.result,this.form.addControl("photo",this._fb.control(this.base64Image)),this.noImageChanged=!1,this._changeDetectorRef.markForCheck()},s.readAsDataURL(e.target.files[0])}}convertDate(e){return(0,h.Mu)(e)}onKeyDown(e){"Space"===e.code&&e.preventDefault()}onlyPositiveNumbers(e){const o=e.target.value+e.key;(isNaN(o)||Number(o)<=0)&&e.preventDefault()}getMoths(){this.months=this._service.getMonths()}getAmounts(){this.amounts=this._service.getAmounts()}onClose(e=!1){this._dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.WI),t.Y36(l.qu),t.Y36(x.K),t.Y36(y),t.Y36(h.cw),t.Y36(t.sBO),t.Y36(g.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dialog"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-title",""],["name","form",3,"formGroup","ngSubmit"],["matInput","","placeholder","Detalles del pago","formControlName","description"],["placeholder","Monto","formControlName","amount"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Mes","formControlName","month"],[1,"aspect-w-9","aspect-h-6","mt-4"],[1,"flex","items-center","justify-center","border","rounded-lg","bg-gray-50","dark:bg-card"],["class","donation-image",3,"src",4,"ngIf"],["class","relative",4,"ngIf"],[1,"mt-4"],["type","file","name","image","accept",".jpeg,.jpg,.png,.pdf",3,"change"],["mat-dialog-actions",""],["mat-button","","type","button",3,"click"],["mat-flat-button","","type","submit",3,"color","disabled"],[3,"value"],[1,"donation-image",3,"src"],[1,"relative"],[1,"icon-size-14","text-hint",3,"svgIcon"],[1,"bg-red-600","doc-file"],["name","form",3,"formGroup"],["matInput","","placeholder","Monto","formControlName","amount",3,"keypress"],["matInput","","placeholder","Fecha de pago efectuado","formControlName","payedAt"],["mat-flat-button","",3,"color","click"]],template:function(e,o){1&e&&(t.YNc(0,H,28,12,"ng-container",0),t.YNc(1,tt,24,9,"ng-container",0)),2&e&&(t.Q6J("ngIf",o.isNew),t.xp6(1),t.Q6J("ngIf",!o.isNew))},directives:[c.O5,g.uh,l._Y,l.JL,l.sg,f.KE,Q.Nt,l.Fj,l.JJ,l.u,f.TO,b.gD,c.sg,Z.ey,_.Hw,g.H8,v.lW],styles:[".mat-form-field[_ngcontent-%COMP%]{display:grid!important;width:100%;margin-bottom:10px}.donation-image[_ngcontent-%COMP%]{height:100%;object-fit:cover}.doc-file[_ngcontent-%COMP%]{color:#fff;text-align:center;font-weight:700;font-style:italic}"]}),n})();var et=a(4557),T=a(6087),A=a(4847),nt=a(3844);function ot(n,i){if(1&n&&t._UZ(0,"img",14),2&n){const e=t.oxw().$implicit;t.Q6J("src",null==e?null:e.photo,t.LSH)}}function it(n,i){1&n&&(t.TgZ(0,"div",15),t._uU(1," NO THUMB "),t.qZA())}function at(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"div",8),t.YNc(4,ot,1,1,"img",9),t.YNc(5,it,2,0,"div",10),t.qZA()(),t.TgZ(6,"div",11),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"div",11),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA(),t.TgZ(13,"div")(14,"button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).openDialog(s)}),t._UZ(15,"mat-icon",13),t.qZA()()(),t.BQk()}if(2&n){const e=i.$implicit,o=t.oxw(3);t.xp6(4),t.Q6J("ngIf",null==e?null:e.photo),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.photo)),t.xp6(2),t.hij(" ",t.gM2(8,5,null==e?null:e.amount,"GTQ","symbol","1.2-2")," "),t.xp6(3),t.hij(" ",o.convertMonth(null==e?null:e.month)," "),t.xp6(2),t.hij(" ",o.convertDate(null==e?null:e.payedAt)," ")}}function rt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,at,16,10,"ng-container",5),t.BQk()),2&n){const e=i.ngIf,o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}const st=function(n){return{"pointer-events-none":n}};function lt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div"),t._uU(5,"Monto"),t.qZA(),t.TgZ(6,"div"),t._uU(7,"Mes"),t.qZA(),t.TgZ(8,"div"),t._uU(9,"Fecha de pago"),t.qZA(),t.TgZ(10,"div"),t._uU(11,"Opciones"),t.qZA()(),t.YNc(12,rt,2,2,"ng-container",0),t.ALo(13,"async"),t.qZA(),t._UZ(14,"mat-paginator",4),t.BQk()),2&n){const e=t.oxw();t.xp6(12),t.Q6J("ngIf",t.lcZ(13,4,e.payments$)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,st,e.loading))("length",e.count)("pageSizeOptions",e.pageSizeOptions)}}function ct(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",16),t._UZ(2,"mat-icon",17),t.TgZ(3,"div",18),t._uU(4," No se han encontrado pagos realizados. "),t.qZA()(),t.BQk()),2&n&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:document"))}let mt=(()=>{class n{constructor(e,o,r,s){this.dialog=e,this._user=o,this._payment=r,this._changeDetectorRef=s,this._unsubscribeAll=new d.x,this.payments=[],this.pageSize=10,this.page=1,this.count=0,this.pages=0,this.pageSizeOptions=[10,15,25]}ngOnInit(){this._onGetSession(),this.onListenDialog(),this.onChangeNeighbors(),this.getPayments()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getPayments(e,o=1,r=10){var s;try{const m=e||parseInt(null===(s=this.user)||void 0===s?void 0:s.id);this.loading=!0,this._payment.getPayments({page:o,pageSize:r,userId:m}).pipe((0,u.R)(this._unsubscribeAll)).subscribe(p=>{this.payments=p.payments,this.page=p.page,this.count=p.total,this.pages=p.pages,this.loading=!1,this._changeDetectorRef.markForCheck()}),this.payments$=this._payment.payments$}catch(m){console.log(m)}}_onGetSession(){this._user.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e})}onListenDialog(){this._payment.dialogStatus.pipe((0,u.R)(this._unsubscribeAll)).subscribe(e=>{this.getPayments(this.userId,this.page,this.pageSize)})}onChangeNeighbors(){this._payment.userId$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(e=>{this.userId=e,this.getPayments(e)})}convertDate(e){return(0,h.Mu)(e)}convertMonth(e){var o;return null===(o=this._payment.getMonths().find(s=>s.value==e))||void 0===o?void 0:o.description}openDialog(e){this.dialog.open(U,{width:"500px",data:{payment:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.uw),t.Y36(x.K),t.Y36(y),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["payment-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(T.NW,5),t.Gf(A.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o._paginator=r.first),t.iGM(r=t.CRH())&&(o._sort=r.first)}},decls:2,vars:2,consts:[[4,"ngIf"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid-payment","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageSizeOptions"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid-payment","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],["class","donation-photo-list",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["svgIcon","heroicons_outline:pencil-alt"],[1,"donation-photo-list",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","flex-col","flex-auto","items-center","justify-center",2,"margin-top","17%"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,o){1&e&&(t.YNc(0,lt,15,8,"ng-container",0),t.YNc(1,ct,5,1,"ng-container",0)),2&e&&(t.Q6J("ngIf",o.count),t.xp6(1),t.Q6J("ngIf",!o.count&&!o.loading))},directives:[c.O5,A.YE,c.sg,v.lW,_.Hw,T.NW,c.mk],pipes:[c.Ov,c.H9],styles:[".inventory-grid-payment{grid-template-columns:3.5fr 1.5fr 1fr}@media (min-width: 600px){.inventory-grid-payment{grid-template-columns:.5fr 1fr 1fr 1fr 1fr}}@media (min-width: 960px){.inventory-grid-payment{grid-template-columns:.5fr 1fr 1fr 1fr 1fr}}@media (min-width: 1280px){.inventory-grid-payment{grid-template-columns:.5fr 1fr 1fr 1fr 1fr}}.donation-photo-list{height:100%;width:100%}\n"],encapsulation:2,data:{animation:nt.L},changeDetection:0}),n})();function ut(n,i){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.Email)}}function gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",8),t._UZ(1,"mat-icon",9),t.TgZ(2,"mat-select",10,11),t.NdJ("selectionChange",function(r){return t.CHM(e),t.oxw().onOptionSelection(r)}),t.YNc(4,ut,2,2,"mat-option",12),t.ALo(5,"async"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",e.searchInputControl),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,3,e.neighbors$))}}function pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog()}),t._UZ(1,"mat-icon",15),t.TgZ(2,"span",16),t._uU(3,"Realizar pago"),t.qZA()()}2&n&&(t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"))}const dt=[{path:"",component:(()=>{class n{constructor(e,o,r,s,m){this._user=e,this._dialog=o,this._session=r,this._payments=s,this._snackbar=m,this._unsubscribeAll=new d.x,this.searchInputControl=new l.NI}ngOnInit(){this.onValidateRole()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onValidateRole(){this._session.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e,1===(null==e?void 0:e.role)&&this.onGetNeighbor()})}onGetNeighbor(){var e=this;return(0,Y.Z)(function*(){1===e.user.role&&(e._user.getNeighbors().pipe((0,u.R)(e._unsubscribeAll)).subscribe(o=>{var r;e.neighbors=o,e.searchInputControl.setValue(null===(r=o[0])||void 0===r?void 0:r.id)}),e.neighbors$=e._user.neighbors$)})()}onOptionSelection(e){this._payments.userId.next(e.value)}openDialog(){this._dialog.open(U,{width:"500px"}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>this._payments.listenDialog())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(et.K),t.Y36(g.uw),t.Y36(x.K),t.Y36(y),t.Y36(h.cw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment"]],decls:10,vars:2,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["class","fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded min-w-64",4,"ngIf"],["mat-flat-button","","class","ml-4 mr-4",3,"color","click",4,"ngIf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","selectionChange"],["residenceSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-flat-button","",1,"ml-4","mr-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Pagos"),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,gt,6,5,"mat-form-field",4),t.YNc(6,pt,4,2,"button",5),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"payment-list"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",1===(null==o.user?null:o.user.role)),t.xp6(1),t.Q6J("ngIf",3===(null==o.user?null:o.user.role)))},directives:[c.O5,f.KE,_.Hw,f.qo,b.gD,l.JJ,l.oH,c.sg,Z.ey,v.lW,mt],pipes:[c.Ov],encapsulation:2}),n})()}];let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[C.Bz.forChild(dt)],C.Bz]}),n})();var ht=a(4466),_t=a(7446),vt=a(2181),xt=a(5899),yt=a(2368),bt=a(7238);let Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ht.m,ft,v.ot,_t.p9,f.lN,_.Ps,Q.c,vt.Tx,T.TU,xt.Cv,Z.si,A.JX,b.LD,yt.rP,bt.AV,g.Is]]}),n})()}}]);