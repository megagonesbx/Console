"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[337],{6337:(G,d,o)=>{o.r(d),o.d(d,{ReportsModule:()=>$});var m=o(4521),t=o(5e3),a=o(6087),c=o(4847),v=o(83),x=o(7579),y=o(6451),C=o(3900),Z=o(4004),g=o(2722),b=o(5279),R=o(1937),f=o(8966),l=o(9808),u=o(7423),h=o(5245);function T(n,i){if(1&n&&t._UZ(0,"img",14),2&n){const e=t.oxw().$implicit;t.Q6J("src",null==e?null:e.incidentEvidence,t.LSH)}}function A(n,i){1&n&&(t.TgZ(0,"div",15),t._uU(1," NO THUMB "),t.qZA())}function O(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"div",8),t.YNc(4,T,1,1,"img",9),t.YNc(5,A,2,0,"div",10),t.qZA()(),t.TgZ(6,"div",11),t._uU(7),t.qZA(),t.TgZ(8,"div",11),t._uU(9),t.qZA(),t.TgZ(10,"div")(11,"button",12),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw(3).openDialog(p)}),t._UZ(12,"mat-icon",13),t.qZA()()(),t.BQk()}if(2&n){const e=i.$implicit;t.xp6(4),t.Q6J("ngIf",null==e?null:e.incidentEvidence),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.incidentEvidence)),t.xp6(2),t.hij(" ",null==e?null:e.incidentName," "),t.xp6(2),t.hij(" ",null==e?null:e.user," ")}}function U(n,i){if(1&n&&(t.ynx(0),t.YNc(1,O,13,4,"ng-container",5),t.BQk()),2&n){const e=i.ngIf,s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",s.trackByFn)}}const I=function(n){return{"pointer-events-none":n}};function L(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div"),t._uU(5,"Reporte"),t.qZA(),t.TgZ(6,"div"),t._uU(7,"Usuario"),t.qZA(),t.TgZ(8,"div"),t._uU(9,"Opciones"),t.qZA()(),t.YNc(10,U,2,2,"ng-container",0),t.ALo(11,"async"),t.qZA(),t._UZ(12,"mat-paginator",4),t.BQk()),2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngIf",t.lcZ(11,4,e.reports$)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,I,e.loading))("length",e.count)("pageSizeOptions",e.pageSizeOptions)}}function M(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",16),t._UZ(2,"mat-icon",17),t.TgZ(3,"div",18),t._uU(4," No se han encontrado reportes. "),t.qZA()(),t.BQk()),2&n&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:document"))}let Q=(()=>{class n{constructor(e,s,r,p){this._changeDetectorRef=e,this._service=s,this._snackbar=r,this.dialog=p,this.reports=[],this.pageSize=10,this.page=1,this.count=0,this.pages=0,this.pageSizeOptions=[10,15,25],this._unsubscribeAll=new x.x}ngOnInit(){this.getReports(),this.onListenDialog()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"id",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),(0,y.T)(this._sort.sortChange,this._paginator.page).pipe((0,C.w)(()=>(this.loading=!0,this.pageSize=this._paginator.pageSize,this._service.getReports({page:this._paginator.pageIndex+1,pageSize:this._paginator.pageSize}))),(0,Z.U)(()=>this.loading=!1)).pipe((0,g.R)(this._unsubscribeAll)).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getReports(e=1,s=10){this.loading=!0,this._service.getReports({page:e,pageSize:s}).pipe((0,g.R)(this._unsubscribeAll)).subscribe(r=>{this.reports=r.reports,this.page=r.page,this.count=r.total,this.pages=r.pages,this.loading=!1,this._changeDetectorRef.markForCheck()}),this.reports$=this._service.reports$}openDialog(e){this._dialogRef=this.dialog.open(v.B,{width:"500px",data:e})}onListenDialog(){this._service.onGetDialog.pipe((0,g.R)(this._unsubscribeAll)).subscribe(e=>this._dialogRef.close())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(b.i),t.Y36(R.cw),t.Y36(f.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["report-list"]],viewQuery:function(e,s){if(1&e&&(t.Gf(a.NW,5),t.Gf(c.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(s._paginator=r.first),t.iGM(r=t.CRH())&&(s._sort=r.first)}},decls:2,vars:2,consts:[[4,"ngIf"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid-report","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageSizeOptions"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid-report","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],["class","donation-photo-list",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["svgIcon","heroicons_outline:pencil-alt"],[1,"donation-photo-list",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","flex-col","flex-auto","items-center","justify-center",2,"margin-top","17%"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,s){1&e&&(t.YNc(0,L,13,8,"ng-container",0),t.YNc(1,M,5,1,"ng-container",0)),2&e&&(t.Q6J("ngIf",s.count),t.xp6(1),t.Q6J("ngIf",!s.count&&!s.loading))},directives:[l.O5,c.YE,l.sg,u.lW,h.Hw,a.NW,l.mk],pipes:[l.Ov],styles:[".inventory-grid-report[_ngcontent-%COMP%]{grid-template-columns:3.5fr 1.5fr 1fr}@media (min-width: 600px){.inventory-grid-report[_ngcontent-%COMP%]{grid-template-columns:.5fr 2.5fr 2fr 1fr}}@media (min-width: 960px){.inventory-grid-report[_ngcontent-%COMP%]{grid-template-columns:.5fr 2.5fr 2fr 1fr}}@media (min-width: 1280px){.inventory-grid-report[_ngcontent-%COMP%]{grid-template-columns:.5fr 2.5fr 2fr 1fr}}.donation-photo-list[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})();const S=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reports"]],decls:7,vars:0,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Reportes"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4),t._UZ(6,"report-list"),t.qZA()()())},directives:[Q],styles:[""]}),n})()}];let z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(S)],m.Bz]}),n})();var B=o(4466),F=o(3765),J=o(7446),N=o(7322),Y=o(7531),D=o(2181),j=o(5899),w=o(508),P=o(4102),E=o(2368),H=o(7238);let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[B.m,z,F.h,u.ot,J.p9,N.lN,h.Ps,Y.c,D.Tx,a.TU,j.Cv,w.si,c.JX,P.LD,E.rP,H.AV,f.Is]]}),n})()}}]);